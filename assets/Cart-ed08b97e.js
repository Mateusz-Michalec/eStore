import{s as p,r as g,w as m,y as P,j as s,q as c,S as o,L as C,H as b,I as k,J as v,D as S,K as L,M as q,n as w,G as Q,C as E}from"./index-880da98f.js";import{P as $}from"./PageHeader-7be87224.js";import{P as R,b as r}from"./ProductPreview-a5b1ee42.js";import{R as z,B as D}from"./Row-7632a80c.js";import{E as _}from"./Empty-490d5157.js";import{c as A}from"./ProductDataManipulation-d7238871.js";import"./MathUtils-a71e7da3.js";function B({product:e}){const n=p(),[d,h]=g.useState(e.quantity),x=m(a=>P(a,e.id,e==null?void 0:e.size)),N=a=>{h(a.target.value),n(k({id:e.id,size:e==null?void 0:e.size,quantity:Number(a.target.value)}))},j=()=>{let a=[];const y=e.available||x;for(let i=1;i<21;i++)a.push(s.jsx("option",{disabled:i>y,value:i,children:i},i));return a},u=()=>{n(v({id:e.id,size:e==null?void 0:e.size})),n(S("Usunięto produkt z koszyka!","cart"))};return s.jsx(c,{xs:12,children:s.jsx("div",{className:"shadow-sm border p-4",children:s.jsxs(z,{className:"g-4",children:[s.jsx(c,{xs:12,sm:4,md:5,children:s.jsx(R,{product:e,component:"Cart"})}),s.jsx(c,{xs:12,sm:8,md:7,children:s.jsx("section",{children:s.jsxs(o,{gap:2,children:[s.jsx("div",{className:"product-preview-title",children:s.jsx(C,{to:`/produkty/${e.id}`,children:e.title})}),e.size?s.jsxs("span",{children:["Rozmiar:"," ",s.jsx("strong",{className:"text-main",children:e.size})]}):s.jsx("br",{}),s.jsxs(o,{direction:"horizontal",gap:3,children:[s.jsxs("div",{children:[s.jsx("span",{children:"Suma: "}),s.jsxs("strong",{className:"text-main",children:[e.price*e.quantity," PLN"]})]}),s.jsxs("span",{className:"text-secondary",children:["(",e.quantity," x ",e.price," PLN)"]})]}),s.jsxs(o,{direction:"horizontal",className:"my-2",children:[s.jsx(b.Select,{onChange:a=>N(a),value:d,"aria-label":"Wybór ilości",className:"rounded-0 me-3",children:j()}),s.jsx("button",{onClick:()=>u(),children:s.jsx("i",{className:"bi bi-trash fs-4"})})]})]})})})]})})})}function F(){return s.jsx(c,{xs:12,className:"glow cart-product-placeholder",children:s.jsx(r,{bg:"secondary",className:"w-100 p-4 opacity-25",children:s.jsxs(z,{className:"g-4 align-items-center",children:[s.jsx(c,{xs:12,sm:4,md:5,className:"d-flex justify-content-center",children:s.jsx("i",{className:"bi bi-camera cart-product-placeholder__photo opacity-75"})}),s.jsx(c,{xs:12,sm:8,md:7,children:s.jsxs(o,{gap:2,children:[s.jsx(r,{size:"lg",xs:10}),s.jsx(r,{size:"lg",xs:3}),s.jsxs(o,{direction:"horizontal",gap:3,children:[s.jsx(r,{size:"lg",xs:3}),s.jsx(r,{size:"lg",xs:3})]}),s.jsxs(o,{direction:"horizontal",className:"my-2",children:[s.jsx(r,{size:"lg",className:"me-3",xs:10}),s.jsx(r.Button,{variant:"dark",xs:1,"aria-hidden":"true"})]})]})})]})})})}function U(){const e=m(L),n=m(q),{data:d,isLoading:h,isSuccess:x,isError:N}=w(),j=m(Q),u=()=>e.map(t=>{const l=d==null?void 0:d.find(f=>f.id===t.id);return{...A(l,j),...t}}),[a,y]=g.useState([]);g.useEffect(()=>{x&&y(u)},[x,e]);const i=()=>a==null?void 0:a.reduce((t,l)=>t+l.price*l.quantity,0);return s.jsx(s.Fragment,{children:n===0?s.jsx(_,{arrayLength:n,title:"Koszyk jest pusty"}):s.jsxs(E,{children:[s.jsx($,{arrayLength:n,title:"Koszyk"}),s.jsx("section",{children:s.jsx(z,{className:"g-4",children:h?e.map((t,l)=>s.jsx(F,{},`${t.id}_${l}`)):a==null?void 0:a.map(t=>s.jsx(B,{product:t},`${t.id}_${t.size}`))})}),s.jsxs("section",{className:"mt-4 text-main",children:[s.jsxs("h5",{children:["Razem: ",i()," PLN"]}),s.jsx(D,{variant:"dark",className:"mt-2 text-uppercase py-2 px-4 ls-1",children:"Przejdź do kasy"})]})]})})}export{U as default};
